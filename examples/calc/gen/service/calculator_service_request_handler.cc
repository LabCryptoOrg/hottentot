/****************************************************************************
 * Generated by Hottentot CC Generator
 * Date: 03-12-2015 11:50:27
 * Name: calculator_service_request_handler.cc
 * Description:
 *   This file contains implementation of service's request handler class.
 ****************************************************************************/
 
#include <string.h>

#include <naeem/hottentot/runtime/request.h>
#include <naeem/hottentot/runtime/response.h>

#include "calculator_service_request_handler.h"
#include "abstract_calculator_service.h"
#include "../calculator_service.h"



namespace ir {
namespace ntnaeem {
namespace hottentot {
namespace examples {
namespace calc {
namespace service {
  void 
  CalculatorServiceRequestHandler::HandleRequest(::naeem::hottentot::runtime::Request &request, ::naeem::hottentot::runtime::Response &response) {
    if (request.GetMethodId() == 721739713) {
      ::ir::ntnaeem::hottentot::examples::calc::service::AbstractCalculatorService *serviceObject = 
        dynamic_cast< ::ir::ntnaeem::hottentot::examples::calc::service::AbstractCalculatorService*>(service_);
      /*
      * Deserialization and making input variables
      */
      ::naeem::hottentot::runtime::types::UInt16 a;
      // TODO(kamran) Deserialization of non-UDT request argument for 'a' should be done.
      ::naeem::hottentot::runtime::types::UInt16 b;
      // TODO(kamran) Deserialization of non-UDT request argument for 'b' should be done.
      /*
      * Calling service method
      */
      ::naeem::hottentot::runtime::types::UInt16 result = serviceObject->Add(a, b);
      /*
      * Serializiation of returned object
      */
      uint32_t serializedDataLength = 0;
      unsigned char *serializedData = 0; // TODO(kamran): Serialization for non-UDT return type.
      response.SetStatusCode(0);
      response.SetData(serializedData);
      response.SetDataLength(serializedDataLength);
      return;
    }
    char errorMessage[] = "Method not found.";
    response.SetStatusCode(1);
    response.SetData((unsigned char*)errorMessage);
    response.SetDataLength(strlen(errorMessage));
  }
} // END OF NAMESPACE service
} // END OF NAMESPACE calc
} // END OF NAMESPACE examples
} // END OF NAMESPACE hottentot
} // END OF NAMESPACE ntnaeem
} // END OF NAMESPACE ir