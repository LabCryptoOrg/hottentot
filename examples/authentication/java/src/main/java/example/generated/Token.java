/******************************************************************
 * Generated by Hottentot JAVA Generator
 * Date: 
 * Name: 
 * Description:
 *   This file contains definition of an abstract service class.
 ******************************************************************/
package example.generated;

import ir.ntnaeem.hottentot.serializerHelper.PDTDeserializer;
import ir.ntnaeem.hottentot.serializerHelper.PDTSerializer;
import static java.lang.StrictMath.pow;

public class Token {
  private String value;
  private short id;
  private byte[] sampleData;
  public void setValue(String value) {
    this.value = value;
  }
  public String getValue() {
    return value;
  }
  public void setId(short id) {
    this.id = id;
  }
  public short getId() {
    return id;
  }
  public void setSampleData(byte[] sampleData) {
    this.sampleData = sampleData;
  }
  public byte[] getSampleData() {
    return sampleData;
  }
	
  public byte[] serialize() {
    byte[] serializedValue = PDTSerializer.getString(value);
    byte[] serializedId = PDTSerializer.getInt16(id);
    byte[] serializedSampleData = sampleData;
    byte[] output = new byte[serializedValue.length + serializedId.length + serializedSampleData.length];
    int counter = 0;
    //use a loop for every property
    for (int i = 0; i < serializedValue.length; i++) {
      output[counter++] = serializedValue[i];
    }
    for (int i = 0; i < serializedId.length; i++) {
      output[counter++] = serializedId[i];
    }
    for (int i = 0; i < serializedSampleData.length; i++) {
      output[counter++] = serializedSampleData[i];
    }
    return output;
  }
    
  public void deserialize(byte[] serializedByteArray) {
    int counter = 0;
    int dataLength = 0;
    int numbersOfBytesForDataLength;
    //do for every property
    //value : String
    dataLength = 0;
    if(( serializedByteArray[counter] & 0x80) == 0 ) {
      dataLength = serializedByteArray[counter++];
    }else{
      numbersOfBytesForDataLength = serializedByteArray[counter++] & 0x0f;
      for(byte i = 0 ; i < numbersOfBytesForDataLength ; i++){
        dataLength += pow(256, numbersOfBytesForDataLength - i - 1) * serializedByteArray[counter++];
      }
    }
    byte[] valueByteArray = new byte[dataLength];
    System.arraycopy(serializedByteArray,counter,valueByteArray,0,dataLength);
    counter += dataLength;
    setValue(PDTDeserializer.getString(valueByteArray));
    //id : short
    byte[] idByteArray = new byte[2];
    for(int i = 0 ; i < 2 ; i++){
      idByteArray[i] = serializedByteArray[counter++];
    }
    setId(PDTDeserializer.getInt16(idByteArray));
    //sampleData : byte[]
    dataLength = 0;
    if(( serializedByteArray[counter] & 0x80) == 0 ) {
      dataLength = serializedByteArray[counter++];
    }else{
      numbersOfBytesForDataLength = serializedByteArray[counter++] & 0x0f;
      for(byte i = 0 ; i < numbersOfBytesForDataLength ; i++){
        dataLength += pow(256, numbersOfBytesForDataLength - i - 1) * serializedByteArray[counter++];
      }
    }
    byte[] sampleDataByteArray = new byte[dataLength];
    System.arraycopy(serializedByteArray,counter,sampleDataByteArray,0,dataLength);
    counter += dataLength;
    setSampleData(sampleDataByteArray);

  }
}
